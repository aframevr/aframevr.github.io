













<!DOCTYPE html>
<html lang="en"
      data-is-home="false"
      data-is-mobile="false"
      data-supports-vr="false"
      data-supports-touch="false"
      data-site-base-url="https://aframe.io"
      data-site-root-path="/"
      data-site-home-url="https://aframe.io/"
      data-lib-home-url="https://aframe.io/"
      data-lib-examples-url="https://aframe.io/aframe/examples"
      data-title="{title} | A-Frame"
      data-is-spa="false"
      data-ga-id="UA-24056643-4"
      data-aframe-version="0.8.0"
      data-docs-version="0.2.0">
  <head>
    <title>Building an Advanced Scene – A-Frame</title>
    

<script>
  var host = window.location.protocol + '//' + window.location.hostname;
  if (window.location.protocol === 'http:' &&
      window.location.hostname === 'https://aframe.io') {
    window.location.href = 'https:' + window.location.href.substring(6);
  }
</script>


    <meta charset="utf-8">
    <!-- Don't index old documentation pages. -->
    <meta name="robots"
      content="NOINDEX">
    <meta name="description" content="">
    <meta name="keywords" content="webvr,webvr framework,webvr demos,webvr sites,vr javascript,vr framework">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <!-- Origin Trial Token, feature = WebXR Device API, origin = https://aframe.io, expires = 2018-08-09 -->
    <meta http-equiv="origin-trial" data-feature="WebXR Device API" data-expires="2018-08-09" content="AgrTrYfSsYixQo5QDeyd15ZV/71blFzfWIeZj/zPF5oT7FJdzUMC3XtYcpos2I0v5HlJW7W2fWbuSzkCyTuqbQ4AAABOeyJvcmlnaW4iOiJodHRwczovL2FmcmFtZS5pbzo0NDMiLCJmZWF0dXJlIjoiV2ViWFJEZXZpY2UiLCJleHBpcnkiOjE1MzM4NDAyMzN9">
    <!-- Origin Trial Token, feature = WebVR (For Chrome M62+), origin = https://aframe.io, expires = 2018-08-09 -->
    <meta http-equiv="origin-trial" data-feature="WebVR (For Chrome M62+)" data-expires="2018-08-09" content="AlKeBeX7MGtuPmoZUks7FEWi6ke/EeYDPS1zhkb9bsdGr+r9gv+vYXGN7pUIz8+4XPxpWi7guenedSC1jM8B6AcAAABOeyJvcmlnaW4iOiJodHRwczovL2FmcmFtZS5pbzo0NDMiLCJmZWF0dXJlIjoiV2ViVlIxLjFNNjIiLCJleHBpcnkiOjE1MzM4NDAyMzN9">
    <link rel="canonical" href="https://aframe.io">
    <link href="https://fonts.googleapis.com/css?family=Fira+Sans:300,400,600" rel="stylesheet">
    <meta property="fb:app_id" content="1535794316743373">
    <meta property="og:title" content="Building an Advanced Scene – A-Frame">
    <meta property="og:site_name" content="A-Frame">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://aframe.io">
    <meta property="og:description" content="">
    <meta property="og:image" content="http://aframe.io/images/card.jpg?v2">
    <meta property="og:image:secure_url" content="https://aframe.io/images/card.jpg?v2">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@aframevr">
    <meta name="twitter:creator" content="@aframevr">
    <meta name="twitter:title" content="Building an Advanced Scene – A-Frame">
    <meta name="twitter:description" content="">
    <meta name="twitter:image" content="http://aframe.io/images/card.jpg?v2">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="black">
    <link rel="icon" sizes="192x192" href="https://aframe.io/images/aframe-logo-192.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="https://aframe.io/images/aframe-logo-152.png">
    <link rel="alternate" type="application/rss+xml" title="Feed" href="https://aframe.io/feed.xml">
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-24056643-4', 'auto');
  ga('create', 'UA-35433268-69', 'auto', 'managers');

  ga('send', 'pageview');
  ga('managers.send', 'pageview');

  ga('send', 'event', 'pageload.querystring', window.location.search);
  ga('managers.send', 'event', 'pageload.querystring', window.location.search);

  ga('send', 'event', 'pageload.hash', window.location.hash);
  ga('managers.send', 'event', 'pageload.hash', window.location.hash);

  ga('send', 'event', 'supports.getVRDevices', 'getVRDevices' in navigator);
  ga('managers.send', 'event', 'supports.getVRDevices', 'getVRDevices' in navigator);

  ga('send', 'event', 'supports.getVRDisplays', 'getVRDisplays' in navigator);
  ga('managers.send', 'event', 'supports.getVRDisplays', 'getVRDisplays' in navigator);

  ga('send', 'event', 'supports.WEBVRPLUS', 'WEBVRPLUS' in window);
  ga('managers.send', 'event', 'supports.WEBVRPLUS', 'WEBVRPLUS' in window);
</script>


    
      <script src="/js/compat.js"></script>
    

    
      <link rel="stylesheet" href="/css/secondary.css">
    

    
      <!-- Search. -->
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"/>
      <link rel="stylesheet" href="/css/search.css">
    
  </head>

  <body data-page-layout="docs" data-page-type="guide">
    <main id="main" class="main">


<!-- Navigation. -->
<div class="wordmark">
  <header id="header" class="header">
    <a id="logo" class="logo" href="/" title="A-Frame">
      <span class="logo__wordmark">A-Frame</span>
    </a>
  </header>

  


<div class="docs-search-wrapper docs-search-sidebar">
  <input type="search" class="search-field" placeholder="&#128269; Search"></input>
</div>

</div>

<aside id="sidebar" class="sidebar borderless-links">
  

<div id="secondary-nav" class="secondary-nav">
  <header id="header" class="header">
    <a id="logo" class="logo" href="/" title="A-Frame">
      <span class="logo__wordmark">A-Frame</span>
    </a>
  </header>

  


<div class="docs-search-wrapper docs-search-sidebar-mobile">
  <input type="search" class="search-field" placeholder="&#128269; Search"></input>
</div>


  <ul id="nav" class="nav">
    
      <li  class="nav-item">
        <a href="/docs/0.8.0/introduction/"
           class="nav-link nav-link-docs current nav-link-disabled"
           
           >
          <span>Docs</span>
        </a>
      </li>
    
      <li  class="nav-item">
        <a href="/blog/"
           class="nav-link nav-link-docs"
           
           >
          <span>Blog</span>
        </a>
      </li>
    
      <li  class="nav-item">
        <a href="/community/"
           class="nav-link nav-link-docs"
           
           >
          <span>Community</span>
        </a>
      </li>
    
      <li  data-slug="github" class="nav-item">
        <a href="https://github.com/aframevr/aframe/"
           class="nav-link nav-link-docs"
            rel="external"
            title="A-Frame project repository on GitHub">
          <span>GitHub</span>
        </a>
      </li>
    
      <li  data-slug="slug" class="nav-item">
        <a href="https://aframe.io/slack-invite/"
           class="nav-link nav-link-docs"
            rel="external"
            title="A-Frame Slack (sign up)">
          <span>Slack</span>
        </a>
      </li>
    
      <li  class="nav-item">
        <a href="https://stackoverflow.com/questions/ask/?tags=aframe"
           class="nav-link nav-link-docs"
            rel="external"
           >
          <span>Ask a Question</span>
        </a>
      </li>
    
  </ul>
</div>


  <div class="list">
    <!-- Version dropdown. -->
    <label class="subnav-label" for="docs-version"><b>Version</b></label>
    <select id="docs-version" onchange="location = this.options[this.selectedIndex].getAttribute('data-href')">
      
        <option false
                data-href="/docs/master/introduction/">
          master
        </option>
      
        <option false
                data-href="/docs/0.8.0/introduction/">
          0.8.0
        </option>
      
        <option false
                data-href="/docs/0.7.0/introduction/">
          0.7.0
        </option>
      
        <option false
                data-href="/docs/0.6.0/introduction/">
          0.6.0
        </option>
      
        <option false
                data-href="/docs/0.5.0/introduction/">
          0.5.0
        </option>
      
        <option false
                data-href="/docs/0.4.0/introduction/">
          0.4.0
        </option>
      
        <option false
                data-href="/docs/0.3.0/introduction/">
          0.3.0
        </option>
      
        <option selected
                data-href="/docs/0.2.0/guide/">
          0.2.0
        </option>
      
        <option false
                data-href="/docs/0.1.0/guide/">
          0.1.0
        </option>
      
    </select>

    
      

      <!-- Section title. -->
      <h3 class="section-title docs-section-title section-title-active">
        <p class="section-title-link">Guide</p>
      </h3>

      <!-- Section links. -->
      <ol class="subnav section-subnav numbered-subnav">
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/guide/"
               class="subnav-link">
              Overview
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/guide/getting-started.html"
               class="subnav-link">
              Getting Started
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/guide/building-a-basic-scene.html"
               class="subnav-link">
              Building a Basic Scene
            </a>
          </li>
        
          <li class="subnav-item  subnav-item-current">
            <a href="/docs/0.2.0/guide/building-an-advanced-scene.html"
               class="subnav-link current">
              Building an Advanced Scene
            </a>
          </li>
        
      </ol>
    
      

      <!-- Section title. -->
      <h3 class="section-title docs-section-title section-title-inactive">
        <p class="section-title-link">Core</p>
      </h3>

      <!-- Section links. -->
      <ol class="subnav section-subnav">
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/core/"
               class="subnav-link">
              Entity-Component-System
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/core/entity.html"
               class="subnav-link">
              Entity
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/core/component.html"
               class="subnav-link">
              Component
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/core/systems.html"
               class="subnav-link">
              System
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/core/scene.html"
               class="subnav-link">
              Scene
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/core/animations.html"
               class="subnav-link">
              Animations
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/core/mixins.html"
               class="subnav-link">
              Mixins
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/core/shaders.html"
               class="subnav-link">
              Shaders
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/core/asset-management-system.html"
               class="subnav-link">
              Asset Management System
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/core/AFRAME.html"
               class="subnav-link">
              AFRAME
            </a>
          </li>
        
      </ol>
    
      

      <!-- Section title. -->
      <h3 class="section-title docs-section-title section-title-inactive">
        <p class="section-title-link">Components</p>
      </h3>

      <!-- Section links. -->
      <ol class="subnav section-subnav">
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/components/"
               class="subnav-link">
              camera
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/components/canvas.html"
               class="subnav-link">
              canvas
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/components/collada-model.html"
               class="subnav-link">
              collada-model
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/components/cursor.html"
               class="subnav-link">
              cursor
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/components/fog.html"
               class="subnav-link">
              fog
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/components/geometry.html"
               class="subnav-link">
              geometry
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/components/keyboard-shortcuts.html"
               class="subnav-link">
              keyboard-shortcuts
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/components/light.html"
               class="subnav-link">
              light
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/components/look-at.html"
               class="subnav-link">
              look-at
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/components/look-controls.html"
               class="subnav-link">
              look-controls
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/components/material.html"
               class="subnav-link">
              material
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/components/obj-model.html"
               class="subnav-link">
              obj-model
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/components/position.html"
               class="subnav-link">
              position
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/components/raycaster.html"
               class="subnav-link">
              raycaster
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/components/rotation.html"
               class="subnav-link">
              rotation
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/components/scale.html"
               class="subnav-link">
              scale
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/components/sound.html"
               class="subnav-link">
              sound
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/components/stats.html"
               class="subnav-link">
              stats
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/components/visible.html"
               class="subnav-link">
              visible
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/components/vr-mode-ui.html"
               class="subnav-link">
              vr-mode-ui
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/components/wasd-controls.html"
               class="subnav-link">
              wasd-controls
            </a>
          </li>
        
      </ol>
    
      

      <!-- Section title. -->
      <h3 class="section-title docs-section-title section-title-inactive">
        <p class="section-title-link">Primitives</p>
      </h3>

      <!-- Section links. -->
      <ol class="subnav section-subnav">
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/primitives/"
               class="subnav-link">
              Introduction
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/primitives/mesh-attributes.html"
               class="subnav-link">
              Mesh Attributes
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/primitives/a-box.html"
               class="subnav-link">
              &lt;a-box&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/primitives/a-camera.html"
               class="subnav-link">
              &lt;a-camera&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/primitives/a-collada-model.html"
               class="subnav-link">
              &lt;a-collada-model&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/primitives/a-cone.html"
               class="subnav-link">
              &lt;a-cone&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/primitives/a-cursor.html"
               class="subnav-link">
              &lt;a-cursor&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/primitives/a-curvedimage.html"
               class="subnav-link">
              &lt;a-curvedimage&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/primitives/a-cylinder.html"
               class="subnav-link">
              &lt;a-cylinder&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/primitives/a-image.html"
               class="subnav-link">
              &lt;a-image&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/primitives/a-light.html"
               class="subnav-link">
              &lt;a-light&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/primitives/a-obj-model.html"
               class="subnav-link">
              &lt;a-obj-model&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/primitives/a-plane.html"
               class="subnav-link">
              &lt;a-plane&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/primitives/a-ring.html"
               class="subnav-link">
              &lt;a-ring&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/primitives/a-sky.html"
               class="subnav-link">
              &lt;a-sky&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/primitives/a-sphere.html"
               class="subnav-link">
              &lt;a-sphere&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/primitives/a-torus.html"
               class="subnav-link">
              &lt;a-torus&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/primitives/a-video.html"
               class="subnav-link">
              &lt;a-video&gt;
            </a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/0.2.0/primitives/a-videosphere.html"
               class="subnav-link">
              &lt;a-videosphere&gt;
            </a>
          </li>
        
      </ol>
    
  </div>
</aside>

  <!-- Documentation. -->
  <div class="content content--structured content--guide copy">
    <div class="mobile-header">
  <a id="sidebar-toggle" href="#" title="Toggle sidebar">&equiv;</a>
  <h1><a href="/">A-Frame</a></h1>
  <span></span>
</div>

<script>
  (function() {
    var sidebarEl = document.querySelector('#sidebar');
    var toggleEl = document.querySelector('#sidebar-toggle');

    // Open sidebar on toggle click.
    toggleEl.addEventListener('click', function () {
      sidebarEl.classList.add('sidebar-open');
    });

    // Close sidebar when clicking content.
    document.body.addEventListener('click', function (evt) {
      if (evt.target !== toggleEl && !evt.target.closest('#sidebar')) {
        sidebarEl.classList.remove('sidebar-open');
      }
    });

    function closest (el, selector) {
      var matchesFn;
      var parent;
      // Vendor prefix.
      ['matches', 'webkitMatchesSelector', 'mozMatchesSelector', 'msMatchesSelector',
       'oMatchesSelector'].some(function (fn) {
          if (typeof document.body[fn] == 'function') {
            matchesFn = fn;
            return true;
          }
          return false;
      });
      // Traverse parents.
      while (el) {
        parent = el.parentElement;
        if (parent && parent[matchesFn](selector)) { return parent; }
        el = parent;
      }
      return null;
    }
  })();
</script>


    <div class="copy__wrap">
      <div class="page__section docs-header">
        <p>
          <a href="/docs/0.2.0/guide/" class="borderless-link">
            0.2.0 &rsaquo; Guide
          </a>
        </p>
      </div>
      <h1 class="page__title">
        Building an Advanced Scene
      </h1>

      

      
      
        <blockquote>
<p><strong>Note:</strong> This documentation is for the old 0.2.0 version of A-Frame. Check out the <a href="/docs/0.8.0/introduction/">documentation for the current 0.8.0 version</a></p>
</blockquote>

      

      <script async src="//assets.codepen.io/assets/embed/ei.js"></script>

<blockquote>
<p>Play with the [finished example on CodePen][<a href="http://codepen.io/team/mozvr/pen/PNoWEz/?editors=1000]" target="_blank" rel="external">http://codepen.io/team/mozvr/pen/PNoWEz/?editors=1000]</a>.</p>
</blockquote>
<p>We built a <a href="./building-a-basic-scene.html">basic scene</a>, but how can we do more? A-Frame is just an abstraction on top of <a href="http://threejs.org" target="_blank" rel="external">three.js</a>, and with <a href="../core/component.html">A-Frame components</a> (not to be confused with Web Components), we can do just about anything three.js can, which is a lot. Let’s go through an example building a scene where the workflow revolves around writing components. We’ll build an interactive scene in which we fire lasers at enemies surrounding us. We can use the standard components that ship with A-Frame, or use components that A-Frame developers have published to the ecosystem. Better yet, we can write our own components to do whatever we want!</p>
<p>Let’s start by adding an enemy target:</p>
<p data-height="500" data-theme-id="0" data-slug-hash="wGBLeB" data-default-tab="html" data-user="mozvr" class="codepen">See the Pen <a href="http://codepen.io/team/mozvr/pen/wGBLeB/" target="_blank" rel="external">Laser Shooter - Step 1</a> by MozVR (<a href="http://codepen.io/mozvr" target="_blank" rel="external">@mozvr</a>) on <a href="http://codepen.io" target="_blank" rel="external">CodePen</a>.</p>

<p>This creates a basic static scene where the enemy stares at you even as you move around. We can use A-Frame components from the ecosystem to do some neat things.</p>
<h2 id="using-components"><a href="#using-components" class="headerlink" title="Using Components"></a>Using Components</h2><p>The <a href="https://github.com/aframevr/awesome-aframe#components" target="_blank" rel="external">awesome-aframe repository</a> is a great place to find components that the community has created to enable new features. Many of these components are started from the [Component Boilerplate][boilerplate and should provide builds in the <code>dist/</code> folders in their repositories. Take the <a href="https://github.com/ngokevin/aframe-layout-component" target="_blank" rel="external">layout component</a> for example. We can grab the build, drop it into our scene, and immediately be able to use a 3D layout system to automatically position entities. Instead of having one enemy, let’s have ten enemies positioned in a circle around the player:</p>
<p data-height="500" data-theme-id="0" data-slug-hash="bpNPjp" data-default-tab="html" data-user="mozvr" class="codepen">See the Pen <a href="http://codepen.io/team/mozvr/pen/bpNPjp/" target="_blank" rel="external">Laser Shooter - Step 2</a> by MozVR (<a href="http://codepen.io/mozvr" target="_blank" rel="external">@mozvr</a>) on <a href="http://codepen.io" target="_blank" rel="external">CodePen</a>.</p>

<p>It is messy in markup to have the enemy entity duplicated ten times. We can drop in the <a href="https://github.com/ngokevin/aframe-template-component" target="_blank" rel="external">template component</a> to clean that up. We can also use the <a href="../core/animation.html">animation system</a> to have enemies march in a circle around us:</p>
<p data-height="500" data-theme-id="0" data-slug-hash="JXoQBm" data-default-tab="html" data-user="mozvr" class="codepen">See the Pen <a href="http://codepen.io/team/mozvr/pen/JXoQBm/" target="_blank" rel="external">Laser Shooter - Step 3</a> by MozVR (<a href="http://codepen.io/mozvr" target="_blank" rel="external">@mozvr</a>) on <a href="http://codepen.io" target="_blank" rel="external">CodePen</a>.</p>

<p>By mixing and matching the layout and template components, we now have ten enemies surrounding us in a circle. Let’s enable gameplay by writing our own components.</p>
<h2 id="writing-components"><a href="#writing-components" class="headerlink" title="Writing Components"></a>Writing Components</h2><p>Developers that are comfortable with JavaScript and three.js can write components to add appearance, behavior, and functionality to the experience. As we’ve seen these components can then be reused and shared with the community. Though not all components have to be shared; they can be ad-hoc or one-off. Since A-Frame is based on an <a href="../core/">entity-component-system pattern</a>, most logic should be implemented within components. The development workflow within A-Frame should try to revolve around components. The <a href="../core/component.html">component documentation</a> goes into much more detail on what a component looks like and how to write one.</p>
<p>We want to be able to fire lasers at the enemies and have them disappear. We will need a component to create lasers on click, a component to generate clicks, a component to propel those lasers, a component to check when a laser comes in contact with an enemy.</p>
<h3 id="spawner-component"><a href="#spawner-component" class="headerlink" title="spawner Component"></a>spawner Component</h3><p>Let’s start by being able to create lasers. We want to be able to spawn a laser entity that starts at the player’s current position. We’ll create a spawner component that listens to an event on the entity, and when that event is emitted, we’ll spawn an entity with a predefined <a href="../core/mixins.html">mixin</a> of components:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">AFRAME.registerComponent(<span class="string">'spawner'</span>, &#123;</span><br><span class="line">  schema: &#123;</span><br><span class="line">    on: &#123; <span class="attr">default</span>: <span class="string">'click'</span> &#125;,</span><br><span class="line">    mixin: &#123; <span class="attr">default</span>: <span class="string">''</span> &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Add event listener.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  update: <span class="function"><span class="keyword">function</span> (<span class="params">oldData</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.el.addEventListener(<span class="keyword">this</span>.data.on, <span class="keyword">this</span>.spawn.bind(<span class="keyword">this</span>));</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Spawn new entity at entity's current position.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  spawn: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> el = <span class="keyword">this</span>.el;</span><br><span class="line">    <span class="keyword">var</span> entity = <span class="built_in">document</span>.createElement(<span class="string">'a-entity'</span>);</span><br><span class="line">    <span class="keyword">var</span> matrixWorld = el.object3D.matrixWorld;</span><br><span class="line">    <span class="keyword">var</span> position = <span class="keyword">new</span> THREE.Vector3();</span><br><span class="line">    <span class="keyword">var</span> rotation = el.getAttribute(<span class="string">'rotation'</span>);</span><br><span class="line">    <span class="keyword">var</span> entityRotation;</span><br><span class="line"></span><br><span class="line">    position.setFromMatrixPosition(matrixWorld);</span><br><span class="line">    entity.setAttribute(<span class="string">'position'</span>, position);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Have the spawned entity face the same direction as the entity.</span></span><br><span class="line">    <span class="comment">// Allow the entity to further modify the inherited rotation.</span></span><br><span class="line">    position.setFromMatrixPosition(matrixWorld);</span><br><span class="line">    entity.setAttribute(<span class="string">'position'</span>, position);</span><br><span class="line">    entity.setAttribute(<span class="string">'mixin'</span>, <span class="keyword">this</span>.data.mixin);</span><br><span class="line">    entity.addEventListener(<span class="string">'loaded'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      entityRotation = entity.getComputedAttribute(<span class="string">'rotation'</span>);</span><br><span class="line">      entity.setAttribute(<span class="string">'rotation'</span>, &#123;</span><br><span class="line">        x: entityRotation.x + rotation.x,</span><br><span class="line">        y: entityRotation.y + rotation.y,</span><br><span class="line">        z: entityRotation.z + rotation.z</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">    el.sceneEl.appendChild(entity);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="click-listener-component"><a href="#click-listener-component" class="headerlink" title="click-listener Component"></a>click-listener Component</h3><p>Now we need to a way to generate a click event on the player entity in order to spawn the laser. We could just write a vanilla JavaScript event handler in a content script, but it is more reusable to write a component that can allow any entity to listen for clicks:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">AFRAME.registerComponent(<span class="string">'click-listener'</span>, &#123;</span><br><span class="line">  init: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> el = <span class="keyword">this</span>.el;</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      el.emit(<span class="string">'click'</span>, <span class="literal">null</span>, <span class="literal">false</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>From HTML, we define the laser mixin and attach the spawner and click-listener components to the player. When we click, the spawner component will generate a laser starting in front of the camera:</p>
<p data-height="500" data-theme-id="0" data-slug-hash="jqEjvB" data-default-tab="html" data-user="mozvr" class="codepen">See the Pen <a href="http://codepen.io/team/mozvr/pen/jqEjvB/" target="_blank" rel="external">Laser Shooter - Step 4</a> by MozVR (<a href="http://codepen.io/mozvr" target="_blank" rel="external">@mozvr</a>) on <a href="http://codepen.io" target="_blank" rel="external">CodePen</a>.</p>

<h3 id="projectile-component"><a href="#projectile-component" class="headerlink" title="projectile Component"></a>projectile Component</h3><p>Now lasers will spawn in front of us when we click, but we need them to fire and travel. In the spawner component, we had the laser point in the rotation of the camera, and we rotated it 90-degrees around the X-axis to align it correctly. We can add a projectile component to have the laser travel straight in the direction it’s already facing (its local Y-axis in this case):</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">AFRAME.registerComponent(<span class="string">'projectile'</span>, &#123;</span><br><span class="line">  schema: &#123;</span><br><span class="line">    speed: &#123; <span class="attr">default</span>: <span class="number">-0.4</span> &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  tick: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.el.object3D.translateY(<span class="keyword">this</span>.data.speed);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>Then attach the projectile component to the laser mixin:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a-assets</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- Attach projectile behavior. --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a-mixin</span> <span class="attr">id</span>=<span class="string">"laser"</span> <span class="attr">geometry</span>=<span class="string">"primitive: cylinder; radius: 0.05; translate: 0 -2 0"</span></span></span><br><span class="line"><span class="tag">                      <span class="attr">material</span>=<span class="string">"color: green; metalness: 0.2; opacity: 0.4; roughness: 0.3"</span></span></span><br><span class="line"><span class="tag">                      <span class="attr">projectile</span>=<span class="string">"speed: -0.5"</span>&gt;</span><span class="tag">&lt;/<span class="name">a-mixin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a-assets</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>The laser will now fire like a projectile on click:</p>
<p data-height="500" data-theme-id="0" data-slug-hash="YqPmzK" data-default-tab="result" data-user="mozvr" class="codepen">See the Pen <a href="http://codepen.io/team/mozvr/pen/YqPmzK/" target="_blank" rel="external">Laser Shooter - Step 5</a> by MozVR (<a href="http://codepen.io/mozvr" target="_blank" rel="external">@mozvr</a>) on <a href="http://codepen.io" target="_blank" rel="external">CodePen</a>.</p>

<h3 id="collider-component"><a href="#collider-component" class="headerlink" title="collider Component"></a>collider Component</h3><p>The last step is to add a collider component so we can detect when the laser hits an entity. We can do this using the <a href="http://threejs.org/docs/index.html#Reference/Core/Raycaster" target="_blank" rel="external">three.js Raycaster</a>, drawing a ray (line) from one end of the laser to the other, then continuously checking if one of the enemies are intersecting the ray. If an enemy is intersecting our ray, then it is touching the laser, and we use an event to tell the enemy that it got hit:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">AFRAME.registerComponent('collider', &#123;</span><br><span class="line">  schema: &#123;</span><br><span class="line">    target: &#123; default: '' &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * Calculate targets.</span><br><span class="line">   */</span><br><span class="line">  init: function () &#123;</span><br><span class="line">    var targetEls = this.el.sceneEl.querySelectorAll(this.data.target);</span><br><span class="line">    this.targets = [];</span><br><span class="line">    for (var i = 0; i <span class="tag">&lt; <span class="attr">targetEls.length</span>; <span class="attr">i</span>++) &#123;</span></span><br><span class="line"><span class="tag">      <span class="attr">this.targets.push</span>(<span class="attr">targetEls</span>[<span class="attr">i</span>]<span class="attr">.object3D</span>);</span></span><br><span class="line"><span class="tag">    &#125;</span></span><br><span class="line"><span class="tag">    <span class="attr">this.el.object3D.updateMatrixWorld</span>();</span></span><br><span class="line"><span class="tag">  &#125;,</span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">  /**</span></span><br><span class="line"><span class="tag">   * <span class="attr">Check</span> <span class="attr">for</span> <span class="attr">collisions</span> (<span class="attr">for</span> <span class="attr">cylinder</span>)<span class="attr">.</span></span></span><br><span class="line"><span class="tag">   */</span></span><br><span class="line"><span class="tag">  <span class="attr">tick:</span> <span class="attr">function</span> (<span class="attr">t</span>) &#123;</span></span><br><span class="line"><span class="tag">    <span class="attr">var</span> <span class="attr">collisionResults</span>;</span></span><br><span class="line"><span class="tag">    <span class="attr">var</span> <span class="attr">directionVector</span>;</span></span><br><span class="line"><span class="tag">    <span class="attr">var</span> <span class="attr">el</span> = <span class="string">this.el;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">var</span> <span class="attr">sceneEl</span> = <span class="string">el.sceneEl;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">var</span> <span class="attr">mesh</span> = <span class="string">el.getObject3D(</span>'<span class="attr">mesh</span>');</span></span><br><span class="line"><span class="tag">    <span class="attr">var</span> <span class="attr">object3D</span> = <span class="string">el.object3D;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">var</span> <span class="attr">raycaster</span>;</span></span><br><span class="line"><span class="tag">    <span class="attr">var</span> <span class="attr">vertices</span> = <span class="string">mesh.geometry.vertices;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">var</span> <span class="attr">bottomVertex</span> = <span class="string">vertices[0].clone();</span></span></span><br><span class="line"><span class="tag">    <span class="attr">var</span> <span class="attr">topVertex</span> = <span class="string">vertices[vertices.length</span> <span class="attr">-</span> <span class="attr">1</span>]<span class="attr">.clone</span>();</span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">    // <span class="attr">Calculate</span> <span class="attr">absolute</span> <span class="attr">positions</span> <span class="attr">of</span> <span class="attr">start</span> <span class="attr">and</span> <span class="attr">end</span> <span class="attr">of</span> <span class="attr">entity.</span></span></span><br><span class="line"><span class="tag">    <span class="attr">bottomVertex.applyMatrix4</span>(<span class="attr">object3D.matrixWorld</span>);</span></span><br><span class="line"><span class="tag">    <span class="attr">topVertex.applyMatrix4</span>(<span class="attr">object3D.matrixWorld</span>);</span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">    // <span class="attr">Direction</span> <span class="attr">vector</span> <span class="attr">from</span> <span class="attr">start</span> <span class="attr">to</span> <span class="attr">end</span> <span class="attr">of</span> <span class="attr">entity.</span></span></span><br><span class="line"><span class="tag">    <span class="attr">directionVector</span> = <span class="string">topVertex.clone().sub(bottomVertex).normalize();</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">    // <span class="attr">Raycast</span> <span class="attr">for</span> <span class="attr">collision.</span></span></span><br><span class="line"><span class="tag">    <span class="attr">raycaster</span> = <span class="string">new</span> <span class="attr">THREE.Raycaster</span>(<span class="attr">bottomVertex</span>, <span class="attr">directionVector</span>, <span class="attr">1</span>);</span></span><br><span class="line"><span class="tag">    <span class="attr">collisionResults</span> = <span class="string">raycaster.intersectObjects(this.targets,</span> <span class="attr">true</span>);</span></span><br><span class="line"><span class="tag">    <span class="attr">collisionResults.forEach</span>(<span class="attr">function</span> (<span class="attr">target</span>) &#123;</span></span><br><span class="line"><span class="tag">      // <span class="attr">Tell</span> <span class="attr">collided</span> <span class="attr">entity</span> <span class="attr">about</span> <span class="attr">the</span> <span class="attr">collision.</span></span></span><br><span class="line"><span class="tag">      <span class="attr">target.object.el.emit</span>('<span class="attr">collider-hit</span>', &#123;<span class="attr">target:</span> <span class="attr">el</span>&#125;);</span></span><br><span class="line"><span class="tag">    &#125;);</span></span><br><span class="line"><span class="tag">  &#125;</span></span><br><span class="line"><span class="tag">&#125;);</span></span><br></pre></td></tr></table></figure>
<p>Then attach a class to the enemies to designate them as targets, attach animations to listen for collisions to make them disappear, and attach the collider component to the laser that targets enemies. For good measure, let’s make it a challenge and have the enemies march around you as well:</p>
<p>Then we attach a class to the enemies to designate them as targets, attach animations that trigger on collision to make them disappear, and finally attach the collider component to the laser that targets enemies:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a-assets</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">"enemy-sprite"</span> <span class="attr">src</span>=<span class="string">"img/enemy.png"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">id</span>=<span class="string">"enemies"</span> <span class="attr">type</span>=<span class="string">"text/x-nunjucks-template"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">a-entity</span> <span class="attr">layout</span>=<span class="string">"type: circle; radius: 5"</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">a-animation</span> <span class="attr">attribute</span>=<span class="string">"rotation"</span> <span class="attr">dur</span>=<span class="string">"8000"</span> <span class="attr">easing</span>=<span class="string">"linear"</span> <span class="attr">repeat</span>=<span class="string">"indefinite"</span> <span class="attr">to</span>=<span class="string">"0 360 0"</span>&gt;</span><span class="tag">&lt;/<span class="name">a-animation</span>&gt;</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">      &#123;% <span class="keyword">for</span> x <span class="keyword">in</span> range(num) %&#125;</span></span><br><span class="line"><span class="xml">        <span class="comment">&lt;!-- Attach enemy class. --&gt;</span></span></span><br><span class="line"><span class="javascript">        &lt;a-image <span class="class"><span class="keyword">class</span></span>=<span class="string">"enemy"</span> look-at=<span class="string">"#player"</span> src=<span class="string">"#enemy-sprite"</span> transparent=<span class="string">"true"</span>&gt;</span></span><br><span class="line"><span class="xml">          <span class="comment">&lt;!-- Attach collision handler animations. --&gt;</span></span></span><br><span class="line"><span class="javascript">          &lt;a-animation attribute=<span class="string">"opacity"</span> begin=<span class="string">"collider-hit"</span> dur=<span class="string">"400"</span> ease=<span class="string">"linear"</span></span></span><br><span class="line"><span class="javascript">                       <span class="keyword">from</span>=<span class="string">"1"</span> to=<span class="string">"0"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">a-animation</span>&gt;</span></span></span></span><br><span class="line"><span class="javascript">          &lt;a-animation attribute=<span class="string">"scale"</span> begin=<span class="string">"collider-hit"</span> dur=<span class="string">"400"</span> ease=<span class="string">"linear"</span></span></span><br><span class="line"><span class="javascript">                       to=<span class="string">"0 0 0"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">a-animation</span>&gt;</span></span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">a-image</span>&gt;</span></span></span><br><span class="line"><span class="undefined">      &#123;% endfor %&#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">a-entity</span>&gt;</span></span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- Attach collider that targets enemies. --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a-mixin</span> <span class="attr">id</span>=<span class="string">"laser"</span> <span class="attr">geometry</span>=<span class="string">"primitive: cylinder; radius: 0.05; translate: 0 -2 0"</span></span></span><br><span class="line"><span class="tag">                      <span class="attr">material</span>=<span class="string">"color: green; metalness: 0.2; opacity: 0.4; roughness: 0.3"</span></span></span><br><span class="line"><span class="tag">                      <span class="attr">projectile</span>=<span class="string">"speed: -0.5"</span> <span class="attr">collider</span>=<span class="string">"target: .enemy"</span>&gt;</span><span class="tag">&lt;/<span class="name">a-mixin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a-assets</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>And there we have a complete basic interactive scene in A-Frame that can be viewed in VR. We package power into components that allow us to declaratively build scenes without losing control or flexibility. The result is a rudimentary FPS game that supports VR in ultimately <strong>just 30 lines of HTML</strong>:</p>
<p data-height="500" data-theme-id="0" data-slug-hash="reaXNr" data-default-tab="result" data-user="mozvr" class="codepen">See the Pen <a href="http://codepen.io/team/mozvr/pen/reaXNr/" target="_blank" rel="external">Laser Shooter - Final</a> by MozVR (<a href="http://codepen.io/mozvr" target="_blank" rel="external">@mozvr</a>) on <a href="http://codepen.io" target="_blank" rel="external">CodePen</a>.</p>



      <!-- Previous / Next navigation. -->
      <footer class="footer guide-links c">
        
          <span class="float-left">
            <a href="/docs/0.2.0/guide/building-a-basic-scene.html" class="guide-link guide-link-left">← Building a Basic Scene </a></span>
        
        
      </footer>

      <footer class="footer footnote">
  <p>
    The A-Frame project and content on this site are licensed under the <a href="https://github.com/aframevr/aframe/blob/master/LICENSE" rel="external">MIT License</a>.
  </p>
  <p>Found a typo or suggestion for the docs? <br><br> <a href="https://github.com/aframevr/aframe/edit/master/docs/guide/building-an-advanced-scene.md" class="github-file-link" target="_blank" rel="external">Suggest an edit on GitHub</a></p>

  <span class="sponsor" itemscope itemprop="organization" itemtype="http://schema.org/Organization">
    <div class="message">Supported by</div>
    <span itemprop="sponsor" itemscope itemtype="http://schema.org/Organization">
      <a class="mozilla-logo" itemprop="url" href="https://www.mozilla.org/" rel="external">
        <span itemprop="name"></span>
      </a>
    </span>
  </span>
</footer>

    </div>

    <div class="secondary-sidebar">
      

<div id="table-of-contents" class="nav-list">
  <p class="section-title docs-section-title">Table of Contents</p>

  <ul class="subnav">
    
      <li class="subnav-item">
        <a class="subnav-link" href="#using-components">Using Components</a>

        <!-- Nested. -->
        
          <ul>
            
          </ul>
        
      </li>
    
      <li class="subnav-item">
        <a class="subnav-link" href="#writing-components">Writing Components</a>

        <!-- Nested. -->
        
          <ul>
            
              <li class="subnav-item">
                <a class="subnav-link" href="#spawner-component">spawner Component</a>
              </li>
            
              <li class="subnav-item">
                <a class="subnav-link" href="#click-listener-component">click-listener Component</a>
              </li>
            
              <li class="subnav-item">
                <a class="subnav-link" href="#projectile-component">projectile Component</a>
              </li>
            
              <li class="subnav-item">
                <a class="subnav-link" href="#collider-component">collider Component</a>
              </li>
            
          </ul>
        
      </li>
    
  </ul>
</div>

      

      <div class="doc-actions">
        <a class="docs-suggest-edit github-file-link" href="https://github.com/aframevr/aframe/edit/master/docs/guide/building-an-advanced-scene.md" target="_blank" rel="external">Edit Page</a>
        
      </div>
    </div>
  </div>
</div>
</main>

    
      <script src="/js/common.js"></script>
      
      
        <script src="/js/docs.js"></script>
      
    

    
      <!-- Algolia search. -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<script type="text/javascript">
  var searchConfig = {
    apiKey: '9e4a51a1da70daf959bd4750a3fa8f52',
    indexName: 'aframe',
    algoliaOptions: {
      facetFilters: ['version:0.2.0'],
      hitsPerPage: 10
    },
    debug: false
  };

  docsearch(Object.assign(searchConfig, {inputSelector: '.docs-search-sidebar .search-field'}));
  docsearch(Object.assign(searchConfig, {inputSelector: '.docs-search-sidebar-mobile .search-field'}));
</script>

    
  </body>
</html>
